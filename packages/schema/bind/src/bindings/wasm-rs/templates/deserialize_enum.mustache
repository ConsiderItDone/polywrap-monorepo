{{#required}}
if reader.is_next_string() {
  {{#toRustProp}}{{#toLower}}{{name}}{{/toLower}}{{/toRustProp}} = get_{{#toLower}}{{type}}{{/toLower}}_value(reader.read_string().unwrap_or_default().as_str())
      .expect("Failed to get {{type}} value");
} else {
  {{#toRustProp}}{{#toLower}}{{name}}{{/toLower}}{{/toRustProp}} = {{type}}::try_from(reader.read_i32().unwrap_or_default())
      .expect("Failed to convert i32 to {{type}}");
  sanitize_{{#toLower}}{{type}}{{/toLower}}_value({{#toLower}}{{name}}{{/toLower}} as i32)
      .expect("Failed to sanitize {{type}}");
}
{{/required}}
{{^required}}
if !reader.is_next_nil() {
    if reader.is_next_string() {
        {{#toLower}}{{name}}{{/toLower}} = Some(
            get_{{#toLower}}{{type}}{{/toLower}}_value(
                reader.read_string().unwrap_or_default().as_str(),
            )
            .expect("Failed to get {{#toWasm}}{{toGraphQLType}}{{/toWasm}} value"),
        );
    } else {
        {{#toLower}}{{name}}{{/toLower}} = Some(
            {{type}}::try_from(reader.read_i32().unwrap_or_default())
                .expect("Failed to convert i32 to {{#toWasm}}{{toGraphQLType}}{{/toWasm}}"),
        );
        sanitize_{{#toLower}}{{type}}{{/toLower}}_value({{#toLower}}{{name}}{{/toLower}}.unwrap() as i32)
            .expect("Failed to sanitize {{#toWasm}}{{toGraphQLType}}{{/toWasm}}");
    }
} else {
    {{#toLower}}{{name}}{{/toLower}} = None;
}
{{/required}}
