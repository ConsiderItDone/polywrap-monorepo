{{#required}}
if reader.is_next_string() {
  {{#toRustProp}}{{#toLower}}{{name}}{{/toLower}}{{/toRustProp}} = get_{{#toLower}}{{type}}{{/toLower}}_value(reader.read_string().unwrap_or_default().as_str())
      .expect("Failed to get {{#toUpper}}{{type}}{{/toUpper}} value");
} else {
  {{#toRustProp}}{{#toLower}}{{name}}{{/toLower}}{{/toRustProp}} = {{#toUpper}}{{type}}{{/toUpper}}::try_from(reader.read_i32().unwrap_or_default())
      .expect("Failed to convert i32 to {{#toUpper}}{{type}}{{/toUpper}}");
  sanitize_{{#toLower}}{{type}}{{/toLower}}_value({{#toRustProp}}{{#toLower}}{{name}}{{/toLower}}{{/toRustProp}} as i32)
      .expect("Failed to sanitize {{#toUpper}}{{type}}{{/toUpper}}");
}
{{/required}}
{{^required}}
if !reader.is_next_nil() {
    if reader.is_next_string() {
        {{#toRustProp}}{{#toLower}}{{name}}{{/toLower}}{{/toRustProp}} = Some(
            get_{{#toLower}}{{type}}{{/toLower}}_value(
                reader.read_string().unwrap_or_default().as_str(),
            )
            .expect("Failed to get {{#toWasm}}{{toGraphQLType}}{{/toWasm}} value"),
        );
    } else {
        {{#toRustProp}}{{#toLower}}{{name}}{{/toLower}}{{/toRustProp}} = Some(
            {{#toUpper}}{{type}}{{/toUpper}}::try_from(reader.read_i32().unwrap_or_default())
                .expect("Failed to convert i32 to {{#toWasm}}{{toGraphQLType}}{{/toWasm}}"),
        );
        sanitize_{{#toLower}}{{type}}{{/toLower}}_value({{#toLower}}{{name}}{{/toLower}}.unwrap() as i32)
            .expect("Failed to sanitize {{#toWasm}}{{toGraphQLType}}{{/toWasm}}");
    }
} else {
    {{#toRustProp}}{{#toLower}}{{name}}{{/toLower}}{{/toRustProp}} = None;
}
{{/required}}
