{{#__commonImport}}
pub use super::super::common::TestImportQuery;
{{/__commonImport}}
{{^__commonImport}}
use polywrap_wasm_rs::subinvoke;
use serde::{
    Deserialize, 
    Serialize,
};
pub mod serialization;
{{#methods.length}}
pub use serialization::{
    {{#methods}}
    deserialize_{{#toLower}}{{name}}{{/toLower}}_result,
    serialize_{{#toLower}}{{name}}{{/toLower}}_args,
    Input{{#toUpper}}{{name}}{{/toUpper}},
    {{/methods}}
};
{{/methods.length}}
{{#propertyDeps.length}}

{{#propertyDeps}}
use {{crate}}::{{#toUpper}}{{type}}{{/toUpper}};
{{/propertyDeps}}
{{/propertyDeps.length}}

#[derive(Clone, Debug, Deserialize, Serialize)]
pub struct {{#toUpper}}{{type}}{{/toUpper}};

impl {{#toUpper}}{{type}}{{/toUpper}} {
    pub const URI: &'static str = "{{uri}}";
    
    {{#methods}}
    pub fn {{#toLower}}{{name}}{{/toLower}}(input: &Input{{#toUpper}}{{name}}{{/toUpper}}) -> {{#return}}{{#toWasm}}{{toGraphQLType}}{{/toWasm}}{{/return}} {
        let uri = {{#toUpper}}{{type}}{{/toUpper}}::URI;
        let args = serialize_{{#toLower}}{{name}}{{/toLower}}_args(input);
        let result = subinvoke::w3_subinvoke(
            uri.to_string(),
            "{{#toLower}}{{type}}{{/toLower}}".to_string(),
            "{{#toLower}}{{name}}{{/toLower}}".to_string(),
            args,
        );
        deserialize_{{#toLower}}{{name}}{{/toLower}}_result(result.as_slice())
    }
    {{^last}}

    {{/last}}
    {{/methods}}
}
{{/__commonImport}}